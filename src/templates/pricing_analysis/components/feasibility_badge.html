<!-- Feasibility Badge Component -->
<div class="card h-100 shadow-sm
    {% if brand_status.is_blocked %}
        <!-- Marca bloqueada -->
        <div class="display-1 text-danger mb-3">
            <i class="bi bi-shield-lock-fill"></i>
        </div>
        <h3 class="text-danger mb-3">MARCA BLOQUEADA</h3>
        <p class="text-muted">
            Esta marca no esta autorizada para tu cuenta.
        </p>

        {% if brand_status.brand %}
            <span class="badge bg-danger fs-6 px-3 py-2">
                {{ brand_status.brand }}
            </span>
        {% endif %}

    {% elif not analysis.is_available_usa %}
        border-warning bg-warning bg-opacity-10
    {% elif analysis.is_feasible %}
        border-success bg-success bg-opacity-10
    {% else %}
        border-danger bg-danger bg-opacity-10
    {% endif %}">

    <div class="card-body text-center d-flex flex-column justify-content-center">
        {% if not analysis.is_available_usa %}
            <!-- No disponible en USA -->
            <div class="display-1 text-warning mb-3">
                <i class="bi bi-exclamation-triangle-fill"></i>
            </div>
            <h3 class="text-warning mb-3">NO DISPONIBLE EN USA</h3>
            <p class="text-muted">
                Este producto no está disponible en Amazon USA en este momento.
            </p>

        {% elif analysis.is_feasible %}
            <!-- Producto Rentable -->
            <div class="display-1 text-success mb-3">
                <i class="bi bi-check-circle-fill"></i>
            </div>
            <h3 class="text-success mb-3">✓ PRODUCTO RENTABLE</h3>
            <p class="text-muted mb-3">Viable para venta</p>

            <hr>

            <!-- Badges de confianza y margen -->
            <div class="d-flex justify-content-center gap-2 flex-wrap">
                {% if analysis.confidence_score %}
                    {% if analysis.confidence_score == 'HIGH' %}
                        <span class="badge bg-success fs-6 px-3 py-2">
                            ✓ Alta Confianza
                        </span>
                    {% elif analysis.confidence_score == 'MEDIUM' %}
                        <span class="badge bg-warning fs-6 px-3 py-2">
                            ~ Confianza Media
                        </span>
                    {% else %}
                        <span class="badge bg-danger fs-6 px-3 py-2">
                            ! Baja Confianza
                        </span>
                    {% endif %}
                {% endif %}

                {% if metrics.profit_percentage %}
                    <span class="badge bg-primary fs-6 px-3 py-2">
                        Margen neto sobre Revenue {{ metrics.profit_percentage|floatformat:1 }}%
                    </span>
                {% endif %}
            </div>

        {% else %}
            <!-- No Rentable -->
            <div class="display-1 text-danger mb-3">
                <i class="bi bi-x-circle-fill"></i>
            </div>
            <h3 class="text-danger mb-3">✗ NO RENTABLE</h3>
            <p class="text-muted">
                El margen de ganancia no es suficiente para este producto.
            </p>

            {% if analysis.confidence_score %}
                <hr>
                {% if analysis.confidence_score == 'HIGH' %}
                    <span class="badge bg-success fs-6 px-3 py-2">
                        ✓ Alta Confianza
                    </span>
                {% elif analysis.confidence_score == 'MEDIUM' %}
                    <span class="badge bg-warning fs-6 px-3 py-2">
                        ~ Confianza Media
                    </span>
                {% else %}
                    <span class="badge bg-danger fs-6 px-3 py-2">
                        ! Baja Confianza
                    </span>
                {% endif %}
            {% endif %}
        {% endif %}
    </div>
</div>
